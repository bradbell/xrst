.. include:: xrst_preamble.rst

.. _toml_file-name:

!!!!!!!!!
toml_file
!!!!!!!!!

xrst input file: ``xrst/get_toml_dict.py``

.. meta::
   :keywords: toml_file, configuration, xrst

.. index:: toml_file, configuration, xrst

.. _toml_file-title:

Configuration File for xrst
###########################
A toml file is used to configure xrst.

#. The location of this file is specified by the xrst
   :ref:`run_xrst@toml_file` argument.
#. This file is a sequence of toml tables,
   if a table can only have one entry, the entry is named data.
#. Each table, has a default value that is used when the table
   is not present in the toml file.
#. All of the entries in the table have the same type
   as its corresponding default.
   If an entry has components, all of the comments have the same
   type as the default components.

.. contents::
   :local:

.. meta::
   :keywords: project_name

.. index:: project_name

.. _toml_file@project_name:

project_name
************
The only value in this table is the name of this project.

.. meta::
   :keywords: default

.. index:: default

.. _toml_file@project_name@Default:

Default
=======

.. literalinclude:: ../../xrst/get_toml_dict.py
   :lines: 45-46
   :language: toml

.. _toml_file@project_name@Example:

Example
=======

.. literalinclude:: ../../xrst.toml
   :lines: 5-6
   :language: toml

.. meta::
   :keywords: directory

.. index:: directory

.. _toml_file@directory:

directory
*********
This table specifies the locations of some xrst directories:

.. meta::
   :keywords: project_directory

.. index:: project_directory

.. _toml_file@directory@project_directory:

project_directory
=================
This *project_directory* can be an absolute path,
or a path relative to the location where :ref:`xrst <run_xrst-name>` is run.
All of the other directories are specified relative to this directory.
The other directories may have ``../`` in their specifications; i.e.,
they do not need to be sub-directories of the project directory.

.. meta::
   :keywords: html_directory

.. index:: html_directory

.. _toml_file@directory@html_directory:

html_directory
==============
This is the directory, relative to the *project_directory*,
where the output files are stored when
:ref:`run_xrst@target` is ``html`` .

.. meta::
   :keywords: pdf_directory

.. index:: pdf_directory

.. _toml_file@directory@pdf_directory:

pdf_directory
=============
This is the directory, relative to the *project_directory*,
where the output files are stored when
:ref:`run_xrst@target` is ``pdf`` .

.. meta::
   :keywords: rst_directory

.. index:: rst_directory

.. _toml_file@directory@rst_directory:

rst_directory
=============
This is the directory, relative to the *project_directory*,
where xrst writes the rst files it extracts from the source code.
For each :ref:`begin_cmd@page_name` , the file

|space| *rst_directory*\ /\ *page_name*\ ``.rst``

is the RST file for the corresponding page. There is one exception
to this rule. If *page_name* ends with ``.rst``, the extra ``.rst``
is not added at the end.

.. meta::
   :keywords: other, generated, files

.. index:: other, generated, files

.. _toml_file@directory@rst_directory@Other Generated Files:

Other Generated Files
---------------------
See :ref:`auto_file-title` for the other files generated by ``xrst``
and placed in the *rst_directory*.

.. meta::
   :keywords: default

.. index:: default

.. _toml_file@directory@Default:

Default
=======
Note that '.' denotes the directory where
:ref:`xrst <run_xrst-name>` is run.

.. literalinclude:: ../../xrst/get_toml_dict.py
   :lines: 107-111
   :language: toml

.. _toml_file@directory@Example:

Example
=======

.. literalinclude:: ../../xrst.toml
   :lines: 10-14
   :language: toml

.. meta::
   :keywords: root_file

.. index:: root_file

.. _toml_file@root_file:

root_file
*********
This table maps the :ref:`group names <begin_cmd@group_name>`
to its root (top) xrst input file.
These file names are relative to the
:ref:`toml_file@directory@project_directory` .
Multiple groups can use the same root file.

.. meta::
   :keywords: default

.. index:: default

.. _toml_file@root_file@Default:

Default
=======

.. literalinclude:: ../../xrst/get_toml_dict.py
   :lines: 141-142
   :language: toml

Note that ``default`` corresponds to the
:ref:`begin_cmd@group_name@Default Group` and ``project.xrst``
is the default root file.

.. _toml_file@root_file@Example:

Example
=======

.. literalinclude:: ../../xrst.toml
   :lines: 18-21
   :language: toml

.. meta::
   :keywords: html_theme_options

.. index:: html_theme_options

.. _toml_file@html_theme_options:

html_theme_options
******************
This table maps the :ref:`run_xrst@html_theme` to
the corresponding html_theme_options.
This enable building documentation with different themes without
having to change the toml file between builds.
If *html_theme* does not appear in this mapping, no options are set.

For each theme, the corresponding options are in a dictionary.
The keys of this dictionary are strings, but the values do not
necessarily have the same type as he default case.
In the default below, these values are integers and booleans.

.. meta::
   :keywords: default

.. index:: default

.. _toml_file@html_theme_options@Default:

Default
=======

.. literalinclude:: ../../xrst/get_toml_dict.py
   :lines: 176-181
   :language: toml

.. _toml_file@html_theme_options@Example:

Example
=======

.. literalinclude:: ../../xrst.toml
   :lines: 25-31
   :language: toml

.. meta::
   :keywords: preamble

.. index:: preamble

.. _toml_file@preamble:

preamble
********
This table is used to create a xrst_preamble.rst file that is included
at the beginning of every page.
This table has the following keys:

.. meta::
   :keywords: rst_substitution

.. index:: rst_substitution

.. _toml_file@preamble@rst_substitution:

rst_substitution
================
The value corresponding to this key is a set of rst substitution commands
that get included at the top of every section.

.. meta::
   :keywords: latex_macro

.. index:: latex_macro

.. _toml_file@preamble@latex_macro:

latex_macro
===========
The value corresponding to this key is a list of latex macros.
If :ref:`run_xrst@target` is html, these macros get included at the
top of every page using the sphinx ``:math`` role.
Otherwise *target* is 'pdf' and these macros get included once
at the beginning of the corresponding latex document.
It either case they can be used by every page in the documentation.

.. meta::
   :keywords: default

.. index:: default

.. _toml_file@preamble@Default:

Default
=======

.. literalinclude:: ../../xrst/get_toml_dict.py
   :lines: 226-228
   :language: toml

.. _toml_file@preamble@Example:

Example
=======

.. literalinclude:: ../../xrst.toml
   :lines: 35-43
   :language: toml

.. meta::
   :keywords: project_dictionary

.. index:: project_dictionary

.. _toml_file@project_dictionary:

project_dictionary
******************
The only value in this table is a list of strings.
Each string contains a newline separated list of words.
Leading and trailing white space is not part of each word.
These special words are not considered spelling errors for the entire project.
Special words, for a particular page, are specified using the
:ref:`spell command<spell_cmd-name>`.

.. meta::
   :keywords: default

.. index:: default

.. _toml_file@project_dictionary@Default:

Default
=======

.. literalinclude:: ../../xrst/get_toml_dict.py
   :lines: 258-259
   :language: toml

.. _toml_file@project_dictionary@Example:

Example
=======

.. literalinclude:: ../../xrst.toml
   :lines: 47-63
   :language: toml

.. meta::
   :keywords: not_in_index

.. index:: not_in_index

.. _toml_file@not_in_index:

not_in_index
************
The only value in this table is a list of strings.
Each string  contains a newline separated list of patterns.
Leading and trailing white space is not part of each pattern.
These are python regular expression patterns for heading tokens
that are not included in the index.
A heading token is any sequence of non white space characters
with upper case letters converted to lower case.
For example, a heading might contain the token ``The`` but you
might not want to include ``the`` as a entry in the :ref:`genindex`.
In this case you could have a line containing just ``the`` .
For another example, you might want to exclude all tokens that are
integer numbers.
In this case you could have a line containing just ``[0-9]*`` .

.. meta::
   :keywords: default

.. index:: default

.. _toml_file@not_in_index@Default:

Default
=======

.. literalinclude:: ../../xrst/get_toml_dict.py
   :lines: 292-293
   :language: toml

.. _toml_file@not_in_index@Example:

Example
=======

.. literalinclude:: ../../xrst.toml
   :lines: 67-96
   :language: toml
